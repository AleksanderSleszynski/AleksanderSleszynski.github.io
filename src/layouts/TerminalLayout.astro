---
import '../styles/global.css';
import { ui, icons } from '../data/siteConfig';

interface Props {
    title: string;
    description: string;
}

const { title, description } = Astro.props;
---

<!doctype html>
<html lang="pl">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        
        <!-- SEO Tags -->
        <title>{title}</title>
        <meta name="description" content={description} />
        <meta property="og:title" content={title} />
        <meta property="og:description" content={description} />
        <meta property="og:type" content="website" />
        <!-- Ensure you change this URL to your actual domain before deployment -->
        <meta property="og:url" content="https://aleksandersleszynski.github.io" />
        <meta property="og:image" content="/og-image.png" />

        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;600&display=swap" rel="stylesheet">
    </head>
    
    <!-- FIX: Added 'overflow-x-hidden' to body to prevent horizontal scrolling on mobile -->
    <body class="bg-[#0d1117] text-[#3fb950] font-mono min-h-screen p-4 sm:p-10 leading-relaxed selection:bg-green-900 selection:text-white antialiased flex flex-col overflow-x-hidden">
        
        <main class="max-w-4xl mx-auto w-full flex-grow">
            
            <!-- GLOBAL TERMINAL PROMPT (Navbar) -->
            <div class="mb-10 opacity-70 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">

                <div class="whitespace-normal break-all sm:whitespace-nowrap text-xs sm:text-base">
                    <span class="text-blue-400">{ui.visitor}</span><span class="text-white">@</span><span class="text-purple-400">{ui.host}</span>:<span class="text-blue-400">{ui.path}</span>$ <span id="typewriter"></span><span class="animate-pulse">_</span>
                </div>
                
                <div class="flex items-center gap-4 print:hidden">
                    <!-- Language Switcher -->
                    <button id="lang-toggle" class="flex items-center gap-2 text-xs border border-green-900/50 bg-green-900/10 px-2 py-1 rounded hover:bg-green-900/30 transition-colors cursor-pointer group">
                        <span class="w-3 h-3 group-hover:text-white" set:html={icons.lang} />
                        <span class="text-green-400 font-bold lang-en">{ui.lang_toggle.en}</span>
                        <span class="text-green-400 font-bold lang-pl hidden">{ui.lang_toggle.pl}</span>
                    </button>

                    <!-- Print Button -->
                    <button onclick="window.print()" class="flex items-center gap-2 text-xs border border-green-800 px-3 py-1 rounded hover:bg-green-900/30 transition-colors cursor-pointer text-gray-400 hover:text-white">
                        <span set:html={icons.print} /> 
                        <span class="lang-en">{ui.print_btn.en}</span>
                        <span class="lang-pl hidden">{ui.print_btn.pl}</span>
                    </button>
                </div>
            </div>

            <!-- MAIN CONTENT SLOT -->
            <slot />

            <!-- GLOBAL FOOTER -->
            <div class="mt-20 pt-6 border-t border-gray-800 text-sm text-gray-600 flex justify-between">
                <span>{ui.footer_eof}</span>
                <span class="animate-pulse">_</span>
            </div>

        </main>

        <!-- Global Scripts -->
        <script define:vars={{ command: ui.command }}>
            // Typewriter Effect
            const text = command;
            const element = document.getElementById("typewriter");
            let index = 0;
            
            function typeWriter() {
                if (element && index < text.length) {
                    element.innerHTML += text.charAt(index);
                    index++;
                    setTimeout(typeWriter, 50); 
                }
            }

            // Language Switcher Logic
            // Handles toggling classes on the entire document
            const toggleBtn = document.getElementById('lang-toggle');
            if (toggleBtn) {
                toggleBtn.addEventListener('click', () => {
                    const enElements = document.querySelectorAll('.lang-en');
                    const plElements = document.querySelectorAll('.lang-pl');
                    enElements.forEach(el => el.classList.toggle('hidden'));
                    plElements.forEach(el => el.classList.toggle('hidden'));
                });
            }

            window.onload = typeWriter;
        </script>
    </body>
</html>