---
// Import data from JSON file
import resume from '../data/resume.json';

// Import global styles (Required for Tailwind v4)
import '../styles/global.css';

// SVG Icons map for social links and UI elements
// We use inline SVGs here to avoid external dependencies like FontAwesome
const icons = {
    github: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0 3 1.5-2.64-.5-5.36.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>`,
    linkedin: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/></svg>`,
    email: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>`,
    print: `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect width="12" height="8" x="6" y="14"/></svg>`
};
---

<html lang="pl">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="viewport" content="width=device-width" />
        <meta name="generator" content={Astro.generator} />
        <title>root@devops:~</title>
        
        <!-- Preload fonts to avoid FOUT (Flash of Unstyled Text) -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;600&display=swap" rel="stylesheet">
    </head>
    
    <body class="bg-[#0d1117] text-[#3fb950] font-mono min-h-screen p-4 sm:p-10 leading-relaxed selection:bg-green-900 selection:text-white antialiased">
        
        <main class="max-w-4xl mx-auto">
            
            <!-- Terminal Prompt Header with Typewriter Animation Container -->
            <div class="mb-10 opacity-70 flex justify-between items-center">
                <div>
                    <span class="text-blue-400">visitor</span><span class="text-white">@</span><span class="text-purple-400">cv-system</span>:<span class="text-blue-400">~</span>$ <span id="typewriter"></span><span class="animate-pulse">_</span>
                </div>
                
                <!-- Print Button: Visible only on screen, hidden when printing -->
                <!-- Uses window.print() to trigger browser print dialog -->
                <button onclick="window.print()" class="hidden sm:flex items-center gap-2 text-xs border border-green-800 px-3 py-1 rounded hover:bg-green-900/30 transition-colors cursor-pointer print:hidden text-gray-400 hover:text-white">
                    <span set:html={icons.print} /> Print PDF
                </button>
            </div>

            <!-- Header Section -->
            <header class="mb-12 border-b border-gray-800 pb-8 relative">
                <!-- Added 'text-glow' class for CRT monitor effect -->
                <h1 class="text-5xl font-bold text-gray-100 mb-2 text-glow">{resume.basics.name}</h1>
                <h2 class="text-2xl text-gray-400 mb-6">{resume.basics.label}</h2>
                
                <p class="text-gray-400 max-w-2xl text-sm italic mb-6 border-l-2 border-gray-700 pl-4">
                    {resume.basics.summary}
                </p>

                <!-- NEW: Contact & Social Links Section -->
                <div class="flex flex-wrap gap-6 text-sm text-gray-400 mt-6 print:text-black">
                    <div class="flex items-center gap-2 hover:text-green-400 transition-colors">
                        <span>üìç {resume.basics.location}</span>
                    </div>
                    
                    {resume.basics.email && (
                        <a href={`mailto:${resume.basics.email}`} class="flex items-center gap-2 hover:text-green-400 transition-colors">
                            <span class="w-5 h-5" set:html={icons.email} />
                            {resume.basics.email}
                        </a>
                    )}
                    
                    {resume.basics.github && (
                        <a href={`https://github.com/${resume.basics.github}`} target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 hover:text-green-400 transition-colors">
                            <span class="w-5 h-5" set:html={icons.github} />
                            GitHub
                        </a>
                    )}
                    
                    {resume.basics.linkedin && (
                        <a href={resume.basics.linkedin} target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 hover:text-green-400 transition-colors">
                            <span class="w-5 h-5" set:html={icons.linkedin} />
                            LinkedIn
                        </a>
                    )}
                </div>
            </header>

            <!-- Skills Section -->
            <section class="mb-12 break-inside-avoid">
                <h3 class="text-xl font-bold text-white mb-4 border-b border-gray-800 inline-block text-glow">01_SKILLS</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Backend Skills -->
                    <div>
                        <span class="text-purple-400 text-sm block mb-2">> Backend.scan()</span>
                        <div class="flex flex-wrap gap-2">
                            {resume.skills.backend.map((skill) => (
                                <span class="bg-gray-800 text-gray-300 px-2 py-1 text-xs rounded hover:bg-green-900 hover:text-white transition-colors cursor-default border border-gray-700">
                                    {skill}
                                </span>
                            ))}
                        </div>
                    </div>
                    <!-- DevOps Skills -->
                    <div>
                        <span class="text-purple-400 text-sm block mb-2">> DevOps.scan()</span>
                        <div class="flex flex-wrap gap-2">
                            {resume.skills.devops.map((skill) => (
                                <span class="bg-gray-800 text-gray-300 px-2 py-1 text-xs rounded hover:bg-green-900 hover:text-white transition-colors cursor-default border border-gray-700">
                                    {skill}
                                </span>
                            ))}
                        </div>
                    </div>
                </div>
            </section>

            <!-- Experience Section -->
            <section class="mb-12">
                <h3 class="text-xl font-bold text-white mb-6 border-b border-gray-800 inline-block text-glow">02_EXPERIENCE_LOG</h3>
                
                <div class="space-y-8">
                    {resume.work.map((job) => (
                        <div class="relative pl-6 border-l border-gray-700 hover:border-green-500 transition-colors duration-300 break-inside-avoid">
                            <!-- Timeline Dot -->
                            <div class="absolute -left-[5px] top-0 w-2.5 h-2.5 bg-gray-700 rounded-full"></div>
                            
                            <!-- Job Title and Dates -->
                            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-baseline mb-2">
                                <h4 class="text-lg font-bold text-gray-100">{job.position}</h4>
                                <span class="text-sm text-gray-500 font-bold">{job.startDate} ‚Äî {job.endDate}</span>
                            </div>
                            <div class="text-purple-400 text-sm mb-2">@ {job.company}</div>
                            
                            <!-- Job Highlights / Responsibilities -->
                            <ul class="list-none space-y-1">
                                {job.highlights.map((item) => (
                                    <li class="text-gray-400 text-sm flex items-start">
                                        <span class="mr-2 text-green-500 opacity-50">></span>
                                        {item}
                                    </li>
                                ))}
                            </ul>
                        </div>
                    ))}
                </div>
            </section>

            <!-- Footer / EOF Marker -->
            <div class="mt-20 pt-6 border-t border-gray-800 text-sm text-gray-600 flex justify-between">
                <span>EOF</span>
                <!-- Blinking cursor animation -->
                <span class="animate-pulse">_</span>
            </div>

        </main>

        <!-- Client-side script for the Typewriter Effect -->
        <script>
            const text = "./show-resume.sh --verbose";
            const element = document.getElementById("typewriter");
            let index = 0;

            function typeWriter() {
                if (element && index < text.length) {
                    element.innerHTML += text.charAt(index);
                    index++;
                    setTimeout(typeWriter, 50); // Adjust typing speed here (ms)
                }
            }

            // Start typing when page loads
            window.onload = typeWriter;
        </script>
    </body>
</html>